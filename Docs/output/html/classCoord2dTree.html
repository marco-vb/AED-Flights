<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Projeto Horarios: Coord2dTree Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Projeto Horarios<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classCoord2dTree-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Coord2dTree Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Classe que representa uma árvore de coordenadas 2D.  
 <a href="classCoord2dTree.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Coord2dTree_8h_source.html">Coord2dTree.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a933267ddbe05557ba63c99ac6844305b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCoord2dTree.html#a933267ddbe05557ba63c99ac6844305b">Coord2dTree</a> ()</td></tr>
<tr class="memdesc:a933267ddbe05557ba63c99ac6844305b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construtor da classe.  <a href="classCoord2dTree.html#a933267ddbe05557ba63c99ac6844305b">More...</a><br /></td></tr>
<tr class="separator:a933267ddbe05557ba63c99ac6844305b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338717f71dfb91275f7c029b98dd23ab"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCoord2dTree.html#a338717f71dfb91275f7c029b98dd23ab">insert</a> (double lat, double lon)</td></tr>
<tr class="memdesc:a338717f71dfb91275f7c029b98dd23ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insere um ponto na árvore.  <a href="classCoord2dTree.html#a338717f71dfb91275f7c029b98dd23ab">More...</a><br /></td></tr>
<tr class="separator:a338717f71dfb91275f7c029b98dd23ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78878f4d3271dcb792077ad0efbdf336"><td class="memItemLeft" align="right" valign="top">pair&lt; double, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCoord2dTree.html#a78878f4d3271dcb792077ad0efbdf336">nearest</a> (pair&lt; double, double &gt; p)</td></tr>
<tr class="memdesc:a78878f4d3271dcb792077ad0efbdf336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Procura o ponto mais próximo de outro dado as suas coordenadas.  <a href="classCoord2dTree.html#a78878f4d3271dcb792077ad0efbdf336">More...</a><br /></td></tr>
<tr class="separator:a78878f4d3271dcb792077ad0efbdf336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960d74984e997d8e3335da7c05d46df5"><td class="memItemLeft" align="right" valign="top">vector&lt; pair&lt; double, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCoord2dTree.html#a960d74984e997d8e3335da7c05d46df5">in_radius</a> (pair&lt; double, double &gt; p, double radius)</td></tr>
<tr class="memdesc:a960d74984e997d8e3335da7c05d46df5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Procura os pontos dentro de um raio dado as suas coordenadas.  <a href="classCoord2dTree.html#a960d74984e997d8e3335da7c05d46df5">More...</a><br /></td></tr>
<tr class="separator:a960d74984e997d8e3335da7c05d46df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19bd74cd4ceb5151cad0c13316607112"><td class="memItemLeft" align="right" valign="top">vector&lt; pair&lt; double, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCoord2dTree.html#a19bd74cd4ceb5151cad0c13316607112">nearestN</a> (pair&lt; double, double &gt; p, int n)</td></tr>
<tr class="memdesc:a19bd74cd4ceb5151cad0c13316607112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Procura os N pontos mais próximos de um certo ponto de um dado as suas coordenadas.  <a href="classCoord2dTree.html#a19bd74cd4ceb5151cad0c13316607112">More...</a><br /></td></tr>
<tr class="separator:a19bd74cd4ceb5151cad0c13316607112"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Classe que representa uma árvore de coordenadas 2D. </p>
<p>Esta classe representa uma árvore de coordenadas 2D, que permite:</p><ul>
<li>a inserção das coordenadas de um ponto</li>
<li>procurar o ponto mais próximo de outro dadas as suas coordenadas</li>
<li>procurar todos os pontos dentro de um raio dado</li>
<li>procurar os N pontos mais próximos de um dado ponto</li>
</ul>
<p>Esta implementação tem como base a implementação dos slides do professor Carl Kingsford, professor da Universidade Carnegie Mellon (<a href="https://www.cs.cmu.edu/~ckingsf/bioinfo-lectures/kdtrees.pdf">https://www.cs.cmu.edu/~ckingsf/bioinfo-lectures/kdtrees.pdf</a>). A implementação original usa um array para represar as coordenadas e apenas foi desenhada para funcionar no plano. A nossa implementação usa um par de double para representar as coordenadas e foi ajustada para funcionar numa superficie esferica como a superficie da Terra. Nesta classe foi utilizada a função Haversine para calcular a distância entre dois pontos e a classe <a class="el" href="classRect.html" title="Classe que representa um retangulo entre duas latitudes e duas longitudes.">Rect</a> para representar um retângulo.</p>
<p>Cada nível tem uma dimensão associada (neste caso longitude e latitude) Ao percorrer árvore devemos ir alternando as dimensões. Cada nó tem umas coordenadas associadas (lat, lon) </p>

<p class="definition">Definition at line <a class="el" href="Coord2dTree_8h_source.html#l00042">42</a> of file <a class="el" href="Coord2dTree_8h_source.html">Coord2dTree.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a933267ddbe05557ba63c99ac6844305b" name="a933267ddbe05557ba63c99ac6844305b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a933267ddbe05557ba63c99ac6844305b">&#9670;&#160;</a></span>Coord2dTree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Coord2dTree::Coord2dTree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construtor da classe. </p>
<p>Construtor da classe. Inicializa a árvore vazia, com root = nullptr. </p>

<p class="definition">Definition at line <a class="el" href="Coord2dTree_8cpp_source.html#l00003">3</a> of file <a class="el" href="Coord2dTree_8cpp_source.html">Coord2dTree.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    3</span>                         {</div>
<div class="line"><span class="lineno">    4</span>    root = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">    5</span>    size = 0;</div>
<div class="line"><span class="lineno">    6</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a960d74984e997d8e3335da7c05d46df5" name="a960d74984e997d8e3335da7c05d46df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a960d74984e997d8e3335da7c05d46df5">&#9670;&#160;</a></span>in_radius()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; pair&lt; double, double &gt; &gt; Coord2dTree::in_radius </td>
          <td>(</td>
          <td class="paramtype">pair&lt; double, double &gt;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Procura os pontos dentro de um raio dado as suas coordenadas. </p>
<p>Procura os pontos dentro de um raio dado as suas coordenadas. Caso a árvore esteja vazia, retorna um vetor vazio. Para isso, chama o método privado in_radius(). Caso o raio seja inferior à distancia entre p e o meridiano de 180º, volta a correr o método in_radius(), mas com a longitude equivalente à do ponto p mas como se estivesse no outro lado do meridiano, por exemplo, se o ponto p tem longitude -173º, o ponto p' tem longitude 187º.</p>
<p>Complexidade Temporal:</p><ul>
<li>Em média: O(log n)</li>
<li>No pior caso e se o raio &gt; 1500km: O(n)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Par de coordenadas do ponto a procurar </td></tr>
    <tr><td class="paramname">radius</td><td>Raio de procura </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vetor de pontos dentro do raio </dd></dl>

<p class="definition">Definition at line <a class="el" href="Coord2dTree_8cpp_source.html#l00090">90</a> of file <a class="el" href="Coord2dTree_8cpp_source.html">Coord2dTree.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>                                                                                         {</div>
<div class="line"><span class="lineno">   91</span>    vector&lt;pair&lt;double, double&gt;&gt; best;</div>
<div class="line"><span class="lineno">   92</span>    <a class="code hl_class" href="classRect.html">Rect</a> BB = <a class="code hl_class" href="classRect.html">Rect</a>(-90, 90, -180, 180);</div>
<div class="line"><span class="lineno">   93</span>    in_radius(p, root, 0, BB, best, radius);</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span>(radius &gt; haversine(p.first, p.second, p.first, 180)) {</div>
<div class="line"><span class="lineno">   95</span>        in_radius(make_pair(p.first, (p.second &lt; 0 ? 360 + p.second : -360 + p.second)), root, 0, BB, best, radius);</div>
<div class="line"><span class="lineno">   96</span>    }</div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">return</span> best;</div>
<div class="line"><span class="lineno">   98</span>}</div>
<div class="ttc" id="aclassRect_html"><div class="ttname"><a href="classRect.html">Rect</a></div><div class="ttdoc">Classe que representa um retangulo entre duas latitudes e duas longitudes.</div><div class="ttdef"><b>Definition:</b> <a href="Rect_8h_source.html#l00014">Rect.h:14</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a338717f71dfb91275f7c029b98dd23ab" name="a338717f71dfb91275f7c029b98dd23ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338717f71dfb91275f7c029b98dd23ab">&#9670;&#160;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Coord2dTree::insert </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insere um ponto na árvore. </p>
<p>Insere um ponto na árvore através do método privado insert() e retorna true se o ponto foi inserido com sucesso, false caso contrário.</p>
<p>Complexidade Temporal:</p><ul>
<li>Em média: O(log n)</li>
<li>No pior caso: O(n)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lat</td><td>Latitude do ponto a inserir </td></tr>
    <tr><td class="paramname">lon</td><td>Longitude do ponto a inserir </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true se o ponto foi inserido com sucesso, false caso contrário </dd></dl>

<p class="definition">Definition at line <a class="el" href="Coord2dTree_8cpp_source.html#l00031">31</a> of file <a class="el" href="Coord2dTree_8cpp_source.html">Coord2dTree.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>                                               {</div>
<div class="line"><span class="lineno">   32</span>    pair&lt;double, double&gt; p = make_pair(lat, lon);</div>
<div class="line"><span class="lineno">   33</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   34</span>        root = insert(p, root, 0);</div>
<div class="line"><span class="lineno">   35</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   36</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <span class="keywordtype">char</span>*){</div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   38</span>    }</div>
<div class="line"><span class="lineno">   39</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a78878f4d3271dcb792077ad0efbdf336" name="a78878f4d3271dcb792077ad0efbdf336"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78878f4d3271dcb792077ad0efbdf336">&#9670;&#160;</a></span>nearest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pair&lt; double, double &gt; Coord2dTree::nearest </td>
          <td>(</td>
          <td class="paramtype">pair&lt; double, double &gt;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Procura o ponto mais próximo de outro dado as suas coordenadas. </p>
<p>Procura o ponto mais próximo de outro dado as suas coordenadas. Caso a árvore esteja vazia, retorna um par de coordenadas (-1, -1). Para isso, chama o método privado nearest(). Caso a distancia entre o ponto mais proximo e o ponto p seja inferior à distancia entre p e o meridiano de 180º, volta a correr o método nearest(), mas com a longitude equivalente à do ponto p mas como se estivesse no outro lado do meridiano, por exemplo, se o ponto p tem longitude -173º, o ponto p' tem longitude 187º.</p>
<p>Complexidade Temporal:</p><ul>
<li>Em média: O(log n)</li>
<li>No pior caso: O(n)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Par de coordenadas do ponto a procurar </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Par de coordenadas do ponto mais proximo de (lat, lon) </dd></dl>

<p class="definition">Definition at line <a class="el" href="Coord2dTree_8cpp_source.html#l00063">63</a> of file <a class="el" href="Coord2dTree_8cpp_source.html">Coord2dTree.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>                                                                {</div>
<div class="line"><span class="lineno">   64</span>    pair&lt;double, double&gt; best = make_pair(-1, -1);</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordtype">double</span> best_dist = 1000000000;</div>
<div class="line"><span class="lineno">   66</span>    <a class="code hl_class" href="classRect.html">Rect</a> BB = <a class="code hl_class" href="classRect.html">Rect</a>(-90, 90, -180, 180);</div>
<div class="line"><span class="lineno">   67</span>    nearest(p, root, 0, BB, best, best_dist);</div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">if</span>(haversine(p, best) &gt; haversine(p.first, p.second, p.first, 180)) {</div>
<div class="line"><span class="lineno">   69</span>        nearest(make_pair(p.first, (p.second &lt; 0 ? 360 + p.second : -360 + p.second)), root, 0, BB, best, best_dist);</div>
<div class="line"><span class="lineno">   70</span>    }</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">return</span> best;</div>
<div class="line"><span class="lineno">   72</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a19bd74cd4ceb5151cad0c13316607112" name="a19bd74cd4ceb5151cad0c13316607112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19bd74cd4ceb5151cad0c13316607112">&#9670;&#160;</a></span>nearestN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; pair&lt; double, double &gt; &gt; Coord2dTree::nearestN </td>
          <td>(</td>
          <td class="paramtype">pair&lt; double, double &gt;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Procura os N pontos mais próximos de um certo ponto de um dado as suas coordenadas. </p>
<p>Procura os N pontos mais próximos de um dado as suas coordenadas. Caso a árvore esteja vazia ou o numero de pontos pedidos for 0, retorna um vetor vazio. Para isso, chama o método privado nearestN(). Caso a distancia entre o maximo da fila de prioridade e o ponto p seja inferior à distancia entre p e o meridiano de 180º, volta a correr o método nearestN(), mas com a longitude equivalente à do ponto p, mas como se estivesse no outro lado do meridiano, por exemplo, se o ponto p tem longitude -173º, o ponto p' tem longitude 187º. Depois junta as duas filas de prioridade e mantem apenas os N pontos mais proximos.</p>
<p>Complexidade Temporal:</p><ul>
<li>Em média: O((log n + N) * log N)</li>
<li>No pior caso: O(n * log N)</li>
</ul>
<p>Onde N é o numero de pontos a procurar e n é o numero total de pontos na árvore</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Par de coordenadas do ponto a procurar </td></tr>
    <tr><td class="paramname">n</td><td>Número de pontos a procurar </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vetor de pontos mais próximos de p ordenados por ordem crescente de distância </dd></dl>

<p class="definition">Definition at line <a class="el" href="Coord2dTree_8cpp_source.html#l00126">126</a> of file <a class="el" href="Coord2dTree_8cpp_source.html">Coord2dTree.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  126</span>                                                                                {</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">if</span>(n == 0) <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">if</span>(n &gt; size){</div>
<div class="line"><span class="lineno">  129</span>        cout &lt;&lt; <span class="stringliteral">&quot;Demasiados elementos pedidos&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  130</span>        <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  131</span>    }</div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordtype">double</span> lat = Q.first;</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordtype">double</span> lon = Q.second;</div>
<div class="line"><span class="lineno">  134</span>    priority_queue&lt;pair&lt;double, pair&lt;double, double&gt;&gt;&gt; bestN;</div>
<div class="line"><span class="lineno">  135</span>    <a class="code hl_class" href="classRect.html">Rect</a> BB = <a class="code hl_class" href="classRect.html">Rect</a>(-90, 90, -180, 180);</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    nearestN(Q, root, 0, BB, bestN, n);</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    vector&lt;pair&lt;double, double&gt;&gt; best;</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">if</span>(!bestN.empty() &amp;&amp; bestN.top().first &gt; haversine(Q.first, Q.second, Q.first, 180)) {</div>
<div class="line"><span class="lineno">  142</span>        priority_queue&lt;pair&lt;double, pair&lt;double, double&gt;&gt;&gt; bestN2;</div>
<div class="line"><span class="lineno">  143</span>        nearestN(make_pair(lat, (lon &lt; 0 ? 360 + lon : -360 + lon)), root, 0, BB, bestN2, n);</div>
<div class="line"><span class="lineno">  144</span>        set&lt;pair&lt;double, pair&lt;double, double&gt;&gt;&gt; s;</div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">while</span>(!bestN.empty()){</div>
<div class="line"><span class="lineno">  146</span>            s.insert({((double) round(100*bestN.top().first)) / 100, bestN.top().second});</div>
<div class="line"><span class="lineno">  147</span>            bestN.pop();</div>
<div class="line"><span class="lineno">  148</span>        }</div>
<div class="line"><span class="lineno">  149</span>        <span class="keywordflow">while</span>(!bestN2.empty()){</div>
<div class="line"><span class="lineno">  150</span>            s.insert({((double) round(100*bestN2.top().first)) / 100, bestN2.top().second});</div>
<div class="line"><span class="lineno">  151</span>            bestN2.pop();</div>
<div class="line"><span class="lineno">  152</span>        }</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = s.begin(); it != s.end(); it++){</div>
<div class="line"><span class="lineno">  155</span>            <span class="keywordflow">if</span>(i &gt;= n) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  156</span>            best.push_back(it -&gt; second);</div>
<div class="line"><span class="lineno">  157</span>            i++;</div>
<div class="line"><span class="lineno">  158</span>        }</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    } <span class="keywordflow">else</span> <span class="keywordflow">while</span>(!bestN.empty()){</div>
<div class="line"><span class="lineno">  161</span>        best.push_back(bestN.top().second);</div>
<div class="line"><span class="lineno">  162</span>        bestN.pop();</div>
<div class="line"><span class="lineno">  163</span>    }</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">return</span> best;</div>
<div class="line"><span class="lineno">  165</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/e/trabalhos(2)/FEUP/2o_ano_1o_semestre/AED/projeto2/AED-Flights/DataStructures/<a class="el" href="Coord2dTree_8h_source.html">Coord2dTree.h</a></li>
<li>/mnt/e/trabalhos(2)/FEUP/2o_ano_1o_semestre/AED/projeto2/AED-Flights/DataStructures/<a class="el" href="Coord2dTree_8cpp_source.html">Coord2dTree.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
